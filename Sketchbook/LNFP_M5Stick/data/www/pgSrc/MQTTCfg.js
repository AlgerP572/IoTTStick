function saveConfigFileSettings(){saveJSONConfig(scriptList.Pages[currentPage].ID,scriptList.Pages[currentPage].FileName,configData[workCfg],null)}function upgradeJSONVersion(a){var b=a.Version;console.log(b),console.log(a),b!=jsonFileVersion&&(isNaN(b)||(b=void 0))&&(console.log("upgrading to 1.1.0"),a.DCCTopic="dccBC",a.Version="1.1.0")}function setMQTTBasics(a){"serverID"==a.id&&(configData[workCfg].MQTTServer=a.value),"serverport"==a.id&&(configData[workCfg].MQTTPort=verifyNumber(a.value,configData[workCfg].MQTTPort)),"mqttuser"==a.id&&(configData[workCfg].MQTTUser=a.value),"mqttpassword"==a.id&&(configData[workCfg].MQTTPassword=a.value),"pingtopic"==a.id&&(configData[workCfg].PingTopic=a.value),"dcctopic"==a.id&&(configData[workCfg].DCCTopic=a.value),"bctopic"==a.id&&(configData[workCfg].BCTopic=a.value),"echotopic"==a.id&&(configData[workCfg].EchoTopic=a.value),console.log(configData[workCfg])}function setNodeName(a){"nodename"==a.id&&(configData[workCfg].NodeName=a.value),console.log(configData[workCfg])}function setUseMac(a){configData[workCfg].inclMAC=a.checked?1:0,console.log(configData[workCfg])}function setUsePing(a){configData[workCfg].doPing=a.checked?1:0,pingDelay.style.display=a.checked?"block":"none"}function setPingDelay(a){"pingdelay"==a.id&&(configData[workCfg].pingDelay=verifyNumber(a.value,configData[workCfg].pingDelay)),console.log(configData[workCfg])}function downloadSettings(){downloadConfig(2)}function constructPageContent(a){var b;mainScrollBox=createEmptyDiv(a,"div","pagetopicboxscroll-y","nodeconfigdiv"),createPageTitle(mainScrollBox,"div","tile-1","BasicCfg_Title","h1","MQTT Configuration"),createPageTitle(mainScrollBox,"div","tile-1","","h2","Server Settings"),b=createEmptyDiv(mainScrollBox,"div","tile-1",""),createTextInput(b,"tile-1_4","MQTT Server:","n/a","serverID","setMQTTBasics(this)"),createTextInput(b,"tile-1_4","MQTT Port:","n/a","serverport","setMQTTBasics(this)"),b=createEmptyDiv(mainScrollBox,"div","tile-1",""),createTextInput(b,"tile-1_4","MQTT User Name:","n/a","mqttuser","setMQTTBasics(this)"),createTextInput(b,"tile-1_4","MQTT Password:","n/a","mqttpassword","setMQTTBasics(this)"),createPageTitle(mainScrollBox,"div","tile-1","","h2","Communication Settings"),b=createEmptyDiv(mainScrollBox,"div","tile-1",""),createTextInput(b,"tile-1_4","Node Name:","n/a","nodename","setNodeName(this)"),createCheckbox(b,"tile-1_4","Add MAC Address","cbUseMac","setUseMac(this)"),b=createEmptyDiv(mainScrollBox,"div","tile-1",""),createCheckbox(b,"tile-1_4","Send Periodic Ping","cbUsePing","setUsePing(this)"),pingDelay=createEmptyDiv(b,"div","tile-1",""),pingDelay.style.display="none",createTextInput(pingDelay,"tile-1_4","Ping Delay:","n/a","pingdelay","setPingDelay(this)"),createTextInput(pingDelay,"tile-1_4","Ping Topic:","n/a","pingtopic","setMQTTBasics(this)"),b=createEmptyDiv(mainScrollBox,"div","tile-1",""),createTextInput(b,"tile-1_4","LN Broadcast Topic:","n/a","bctopic","setMQTTBasics(this)"),createTextInput(b,"tile-1_4","LN Echo Topic:","n/a","echotopic","setMQTTBasics(this)"),b=createEmptyDiv(mainScrollBox,"div","tile-1",""),createTextInput(b,"tile-1_4","DCC Broadcast Topic:","n/a","dcctopic","setMQTTBasics(this)"),b=createEmptyDiv(mainScrollBox,"div","tile-1",""),createButton(b,"","Save & Restart","btnSave","saveSettings(this)"),createButton(b,"","Cancel","btnCancel","cancelSettings(this)"),b=createEmptyDiv(mainScrollBox,"div","tile-1",""),createButton(b,"","Save to File","btnDownload","downloadSettings(this)")}function loadNodeDataFields(){}function loadDataFields(a){upgradeJSONVersion(a),writeInputField("serverID",a.MQTTServer),writeInputField("serverport",a.MQTTPort),writeInputField("mqttuser",a.MQTTUser),writeInputField("mqttpassword",a.MQTTPassword),writeInputField("nodename",a.NodeName),writeCBInputField("cbUseMac",a.inclMAC),writeCBInputField("cbUsePing",a.doPing),setVisibility(a.doPing,pingDelay),writeInputField("pingdelay",a.pingDelay),writeInputField("pingtopic",a.PingTopic),writeInputField("bctopic",a.BCTopic),writeInputField("dcctopic",a.DCCTopic),writeInputField("echotopic",a.EchoTopic)}var mainScrollBox,pingDelay;jsonFileVersion="1.1.0";
